<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy New Year</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital@1&family=Poppins:wght@400;500&display=swap" rel="stylesheet">

<style>
/* ===== BASE ===== */
body {
  margin: 0;
  background: #050008;
  color: #ffffff;
  font-family: Poppins, sans-serif;
  overflow: hidden;
}

.page {
  position: absolute;
  inset: 0;
  display: none;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 24px;
  text-align: center;
}
.page.active { display: flex; }

/* ===== SPARKLES ===== */
.sparkle {
  position: fixed;
  width: 2px;
  height: 2px;
  background: #fff;
  border-radius: 50%;
  opacity: 0.6;
  animation: twinkle 3s infinite ease-in-out;
}
@keyframes twinkle {
  0%,100% { opacity: 0.2 }
  50% { opacity: 1 }
}

/* ===== TEXT ===== */
h2 {
  font-family: "Playfair Display", serif;
  font-style: italic;
  font-size: 32px;
  color: #f5f0ff;
}
p { font-size: 17px; }

/* ===== PAGE 1 ===== */
.hold-wrapper {
  position: relative;
  width: 150px;
  height: 150px;
  margin-top: 30px;
}
.heart {
  position: absolute;
  inset: 0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:82px;
  cursor:pointer;
}
svg circle { fill:none; stroke-width:6 }
.ring-bg { stroke:#333 }
.ring-progress {
  stroke:#b38cff;
  stroke-dasharray:314;
  stroke-dashoffset:314;
  transform:rotate(-90deg);
  transform-origin:50% 50%;
  transition:stroke-dashoffset 1s linear;
}
/* ===== PAGE 1 POLISH ===== */
.p1-wrapper {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
}

.p1-glow {
  position: absolute;
  width: 260px;
  height: 260px;
  border-radius: 50%;
  background: radial-gradient(
    circle,
    rgba(180, 140, 255, 0.35),
    rgba(180, 140, 255, 0.15),
    transparent 70%
  );
  filter: blur(20px);
  z-index: 0;
}

.hold-wrapper {
  z-index: 1;
}

.p1-hint {
  font-size: 14px;
  opacity: 0.65;
  margin-top: 8px;
  letter-spacing: 0.4px;
}

.p1-subtle {
  font-size: 15px;
  opacity: 0.75;
}


/* ===== PAGE 2 (NEW DESIGN) ===== */
.page-2-header {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
}

.page-2-heart {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  background: radial-gradient(circle at center, #ff7eb3, #b36bff);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow:
    0 0 40px rgba(255, 126, 179, 0.45),
    0 0 80px rgba(179, 107, 255, 0.25);
  margin-bottom: 6px;
}

.page-2-heart span {
  font-size: 34px;
}

.subtitle {
  font-size: 15px;
  opacity: 0.75;
}

.boxes {
  width: 100%;
  max-width: 440px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  margin: 28px 0 34px;
}

.box {
  position: relative;
  height: 56px;
  border-radius: 999px;
  cursor: pointer;

  /* blended with OG background */
  background:
    radial-gradient(
      120% 120% at 50% 0%,
      rgba(180, 140, 255, 0.12),
      rgba(10, 5, 20, 0.65)
    );

  backdrop-filter: blur(8px);
  border: 1px solid rgba(180, 140, 255, 0.15);

  box-shadow:
    0 0 20px rgba(120, 80, 200, 0.18),
    inset 0 0 25px rgba(255, 255, 255, 0.04);

  display: flex;
  align-items: center;
  justify-content: center;

  transition: transform 0.25s ease, box-shadow 0.25s ease;
}

.box:hover {
  transform: scale(1.015);
  box-shadow:
    0 0 26px rgba(160, 120, 255, 0.25),
    inset 0 0 30px rgba(255, 255, 255, 0.05);
}

.box .center-heart {
  font-size: 22px;
  color: rgba(255, 170, 210, 0.85); /* muted blush */
  transition: opacity 0.3s ease;
}

.box span {
  position: absolute;
  opacity: 0;
  transform: translateY(6px);
  transition: 0.4s ease;
  font-size: 17px;
  color: #ffffff;
  padding: 0 22px;
}

.box.revealed .center-heart {
  opacity: 0;
}

.box.revealed span {
  opacity: 1;
  transform: translateY(0);
}

/* ===== MOBILE FIX: PAGE 2 OVERFLOW ===== */
#p2 {
  justify-content: flex-start;
  padding-top: 32px;
  padding-bottom: 32px;
  overflow-y: auto;
}

@media (max-height: 750px) {
  #p2 {
    padding-top: 24px;
  }

  #p2 .page-2-heart {
    width: 72px;
    height: 72px;
  }

  #p2 h2 {
    font-size: 28px;
  }
}


/* ===== PAGE 3 ===== */
.hero-img {
  width:95%;
  max-width:460px;
  border-radius:22px;
  margin:20px 0;
}
.envelope {
  font-size:70px;
  margin-top:20px;
  cursor:pointer;
  animation:pulse 1.5s infinite;
}
@keyframes pulse {
  0%{transform:scale(1)}
  50%{transform:scale(1.25)}
  100%{transform:scale(1)}
}

/* ===== PAGE 4 ===== */
.message-box {
  width: 95%;
  max-width: 520px;

  /* soft parchment-like base */
  background: linear-gradient(
    180deg,
    #ffffff,
    #faf7ff
  );

  color: #1a1025;
  padding: 32px;
  border-radius: 26px;
  max-height: 70vh;
  overflow-y: auto;
  position: relative;
  font-size: 18px;
  line-height: 1.7;

  /* depth + focus */
  box-shadow:
    0 20px 50px rgba(120, 80, 200, 0.35),
    0 0 0 1px rgba(180, 140, 255, 0.25),
    inset 0 0 30px rgba(255, 200, 235, 0.25);

  backdrop-filter: blur(2px);
}
.message-box {
  animation: messageGlow 1.2s ease-out both;
}

@keyframes messageGlow {
  0% {
    opacity: 0;
    transform: translateY(12px) scale(0.98);
    box-shadow:
      0 0 0 rgba(0,0,0,0);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
.message-box img {
  width:70px;
  position:absolute;
}
.l1 {
  top: -18px;
  left: -18px;
  position: absolute;
}

.l2 {
  position: absolute;
  bottom: -18px;
  right: -18px;
}

/* ðŸ”’ Prevent flowers from scrolling */
.message-box {
  overflow: auto;
}

.message-box img {
  pointer-events: none;
}
@media (max-width: 480px) {
  .message-box {
    padding-bottom: 60px;
  }
}

button {
  margin-top:28px;
  padding:16px 36px;
  font-size:19px;
  border-radius:40px;
  border:none;
  background:#b38cff;
  color:white;
  cursor:pointer;
}

/* ===== FIREWORKS ===== */
#fireworks-canvas {
  position:fixed;
  inset:0;
  width:100vw;
  height:100vh;
  pointer-events:none;
  z-index:1;
}
</style>
</head>

<body>

<script>
for(let i=0;i<80;i++){
  const s=document.createElement("div");
  s.className="sparkle";
  s.style.left=Math.random()*100+"vw";
  s.style.top=Math.random()*100+"vh";
  s.style.animationDelay=Math.random()*3+"s";
  document.body.appendChild(s);
}
</script>

<!-- PAGE 1 -->
<div class="page active" id="p1">
  <div class="p1-wrapper">

    <h2>A little surprise for you</h2>
    <div class="p1-subtle">Before this year begins</div>

    <div class="p1-glow"></div>

    <div class="hold-wrapper">
      <svg width="150" height="150">
        <circle class="ring-bg" cx="75" cy="75" r="50"/>
        <circle class="ring-progress" cx="75" cy="75" r="50"/>
      </svg>
      <div class="heart" id="heart">ðŸ’œ</div>
    </div>

    <div class="p1-hint">Press & hold</div>

  </div>
</div>

<!-- PAGE 2 -->
<div class="page" id="p2">
  <div class="page-2-header">
    <div class="page-2-heart">
      <span>ðŸ’—</span>
    </div>

    <h2>The way I saw you âœ¨</h2>
    <div class="subtitle">Tap each one to reveal</div>
  </div>

  <div class="boxes">
    <div class="box">
      <div class="center-heart">â™¡</div>
      <span>The more I noticed you, the more beautiful you became.</span>
    </div>

    <div class="box">
      <div class="center-heart">â™¡</div>
      <span>Your smile is the brightest one I've ever seen</span>
    </div>

    <div class="box">
      <div class="center-heart">â™¡</div>
      <span>You showed up everyday, even when it wasn't easy</span>
    </div>

    <div class="box">
      <div class="center-heart">â™¡</div>
      <span>Youâ€™re the best person I ever met</span>
    </div>

    <div class="box">
      <div class="center-heart">â™¡</div>
      <span>You lit up my 2025</span>
    </div>
  </div>

  <button onclick="go(3)">See more â†’</button>
</div>

<!-- PAGE 3 -->
<div class="page" id="p3">
  <img src="card-front.webp" class="hero-img">
  <div class="envelope" onclick="go(4)">ðŸ’Œ</div>
  <p>Tap the envelope</p>
</div>

<!-- PAGE 4 -->
<div class="page" id="p4">
  <h2>For pretty baby lei :)</h2>
  <div class="message-box">
    <img src="lily.webp" class="l1">
    <img src="lily.webp" class="l2">
    <p> Hey Lei,<br><br> I wish you a very happy new year. I want you to know that I'm very proud of you. I hope this year brings you the freedom, peace and happiness you have always longed for. Wherever life may take you, I hope you always keep smiling and know that you're deeply cherished and cared for so you never doubt yourself. I'll always pray and wish for your success and well being. Always remember you're very special so don't let others take away what's given to you by God Himself. And I hope our paths may cross again someday, maybe over that coffee we talked about. <br><br> always wishing you well, <br><br> Raab<3
 </p>
  </div>
  <button onclick="handleFireworks()">Watch fireworks</button>
</div>

<!-- PAGE 5 -->
<div class="page" id="p5">
  <canvas id="fireworks-canvas"></canvas>
  <h2 style="z-index:2">I hope this year is kinder to you,<br>and reminds you how deeply loved you are.</h2>
  <img src="final.gif" style="width:90%;max-width:420px;margin-top:20px;z-index:2;">
</div>

<script src="index.umd.js"></script>

<script>
let unlocked=false;
function unlockSound(){
  if(unlocked) return;
  const a=new Audio("explosion0.mp3");
  a.volume=0;
  a.play().then(()=>{a.pause();unlocked=true});
}

let holdTimer;
const ring=document.querySelector(".ring-progress");
const heart=document.getElementById("heart");

heart.onmousedown=heart.ontouchstart=()=>{
  ring.style.strokeDashoffset=0;
  holdTimer=setTimeout(()=>go(2),1000);
};
heart.onmouseup=heart.ontouchend=()=>{
  ring.style.strokeDashoffset=314;
  clearTimeout(holdTimer);
};

function go(n){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById("p"+n).classList.add("active");
}

document.querySelectorAll(".box").forEach(box=>{
  box.onclick=()=>box.classList.add("revealed");
});

let fireworksInstance=null;
let soundInterval=null;

function handleFireworks(){
  unlockSound();
  go(5);
  startFireworks();
  startRomanticSound();
}

function startFireworks(){
  if(fireworksInstance) return;
  const canvas=document.getElementById("fireworks-canvas");

  fireworksInstance=new Fireworks.default(canvas,{
    autoresize:true,
    opacity:0.2,
    intensity:22,
    delay:{min:55,max:95},
    traceSpeed:3.5,
    acceleration:1.012,
    friction:0.975,
    gravity:1.25,
    particles:95,
    explosion:5,
    traceLength:4,
    hue:{min:255,max:285},
    sound:{enabled:false}
  });

  fireworksInstance.start();
}

function startRomanticSound(){
  if(soundInterval) return;
  const sounds=[
    new Audio("explosion0.mp3"),
    new Audio("explosion1.mp3")
  ];
  sounds.forEach(s=>s.volume=0.25);

  soundInterval=setInterval(()=>{
    const s=sounds[Math.floor(Math.random()*sounds.length)];
    s.currentTime=0;
    s.play();
  },3500);
}
</script>

</body>
</html>





